<script src="../views/sorttable.js"></script>

<style>
  #games { font-family: Arial; border-collapse: collapse; font-size: 8pt; }
  #games td, #games th { border: 1px solid #ddd; padding: 8px; }
  #games tr:nth-child(even) { background-color: #f2f2f2; }
  #games tr:hover * { background-color: rgb(194, 149, 141) !important; }
  #games th { background-color: #4CAF50; color: white; }
  #games td { white-space: nowrap; }
  .number { text-align: right; }
  .low { background-color: silver; }
  .high { background-color: rgb(183, 214 ,170); }
  .right-border { border-right: 1px solid #999 !important; }
</style>

<table id="games" class="sortable">
  <tr>
    <th>Game</th>
    <th>Year</th>
    <th>Player Count</th>
    <th>Rank</th>
    <th>Rating</th>
    <th>Voters</th>
  </tr>
  <% @games.each do |game| %>
    <%
      bad_players = game.player_count.to_i < Bgg::MIN_PLAYERS
      bad_rank = !game.rank.to_i.between?(1, Bgg::MAX_RANK)
      bad_rating = game.rating.to_f < 7.5
      bad_voters = game.voters.to_i < Bgg::MIN_VOTERS
      bad_game = bad_players || bad_rank || bad_rating || bad_voters
    %>
    <tr>
      <td class="<%= "low" if bad_game %>"><a href="https://boardgamegeek.com<%= game.href %>"><%= game.name %></a></td>
      <td class="number"><%= game.year %></td>
      <td class="number <%= "low" if bad_players %>"><%= game.player_count %></td>
      <td class="number <%= "low" if bad_rank %>"><%= game.rank %></td>
      <td class="number <%= "low" if bad_rating %>"><%= game.rating %></td>
      <td class="number <%= "low" if bad_voters %>"><%= game.voters %></td>
    </tr>
  <% end %>
</table>
